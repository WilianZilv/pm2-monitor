{"version":3,"sources":["components/Table/index.js","services/socketio.js","components/ProcessesTable/index.js","components/ProcessLogs/index.js","components/Terminal/index.js","App.js","reportWebVitals.js","index.js"],"names":["Table","columns","data","useTable","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","className","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","style","render","row","getRowProps","cells","cell","getCellProps","socketio","ProcessesTable","ids","onFilter","useMemo","Header","accessor","Cell","value","toFixed","width","String","type","checked","includes","values","pm_id","onChange","onClick","emit","makeColumns","ListItem","isLast","autoScroll","ref","useRef","useEffect","current","scrollIntoView","behaviour","channel","time","pname","ProcessLogs","useState","setAutoScroll","out","filter","x","err","i","length","id","Terminal","history","setHistory","setInputHistory","bodyRef","inputRef","on","text","state","scrollTo","scrollHeight","onKeyDown","e","keyCode","cmd","ctrlKey","App","processes","setProcesses","ologs","setoLogs","setids","log","key","reverse","slice","logs","Object","reduce","prev","pid","logs_count","new_logs","push","sort","a","b","timestamp","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5aa53b23.chunk.js","sourcesContent":["import * as React from \"react\";\r\nimport { useTable } from \"react-table\";\r\nimport \"./index.css\";\r\n\r\nexport default function Table({ columns, data }) {\r\n\tconst {\r\n\t\tgetTableProps,\r\n\t\tgetTableBodyProps,\r\n\t\theaderGroups,\r\n\t\trows,\r\n\t\tprepareRow,\r\n\t} = useTable({ columns, data });\r\n\r\n\tif (!columns || !data) return <></>;\r\n\treturn (\r\n\t\t// apply the table props\r\n\t\t<div className=\"table-wrapper\">\r\n\t\t\t<table {...getTableProps()}>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// Loop over the header rows\r\n\t\t\t\t\t\theaderGroups.map((headerGroup) => (\r\n\t\t\t\t\t\t\t// Apply the header row props\r\n\t\t\t\t\t\t\t<tr {...headerGroup.getHeaderGroupProps()}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// Loop over the headers in each row\r\n\t\t\t\t\t\t\t\t\theaderGroup.headers.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t// Apply the header cell props\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\t{...column.getHeaderProps({\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: column.style,\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Render the header\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolumn.render(\"Header\")\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t</thead>\r\n\t\t\t\t{/* Apply the table body props */}\r\n\t\t\t\t<tbody {...getTableBodyProps()}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// Loop over the table rows\r\n\t\t\t\t\t\trows.map((row) => {\r\n\t\t\t\t\t\t\t// Prepare the row for display\r\n\t\t\t\t\t\t\tprepareRow(row);\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t// Apply the row props\r\n\t\t\t\t\t\t\t\t<tr {...row.getRowProps()}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t// Loop over the rows cells\r\n\t\t\t\t\t\t\t\t\t\trow.cells.map((cell) => {\r\n\t\t\t\t\t\t\t\t\t\t\t// Apply the cell props\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td {...cell.getCellProps()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Render the cell contents\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcell.render(\"Cell\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import socketio from \"socket.io-client\";\r\n\r\nexport default socketio();\r\n","import React, { useMemo } from \"react\";\r\nimport Table from \"../Table\";\r\nimport CJSON from \"circular-json\";\r\nimport \"./index.css\";\r\nimport socketio from \"../../services/socketio\";\r\n\r\nconst makeColumns = ({ ids, onFilter }) => [\r\n\t{ Header: \"ID\", accessor: \"pm_id\" },\r\n\t{\r\n\t\tHeader: \"NAME\",\r\n\t\taccessor: \"name\",\r\n\t},\r\n\t{\r\n\t\tHeader: \"RAM\",\r\n\t\taccessor: \"monit.memory\",\r\n\t\tCell: ({ value }) => (value / 1e6).toFixed(1) + \"MB\",\r\n\t\tstyle: {\r\n\t\t\twidth: 84,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tHeader: \"CPU\",\r\n\t\taccessor: \"monit.cpu\",\r\n\t\tCell: ({ value }) => String(value) + \" %\",\r\n\t\tstyle: {\r\n\t\t\twidth: 64,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tHeader: \"STATUS\",\r\n\t\taccessor: \"pm2_env.status\",\r\n\t\tCell: ({ value }) => (\r\n\t\t\t<div className={\"status-col\"}>\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName={`dot ${value === \"online\" ? value : \"\"}`}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tHeader: \"LOGS\",\r\n\t\tCell: ({ row }) => (\r\n\t\t\t<input\r\n\t\t\t\tclassName=\"checkbox\"\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={ids.includes(row.values.pm_id)}\r\n\t\t\t\tonChange={() => onFilter(row.values.pm_id)}\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tHeader: \"\",\r\n\t\taccessor: \"stop\",\r\n\t\tCell: ({ row }) => (\r\n\t\t\t<button onClick={() => socketio.emit(\"stop\", row.values.pm_id)}>\r\n\t\t\t\tParar\r\n\t\t\t</button>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tHeader: \"\",\r\n\t\taccessor: \"restart\",\r\n\t\tCell: ({ row }) => (\r\n\t\t\t<button onClick={() => socketio.emit(\"restart\", row.values.pm_id)}>\r\n\t\t\t\tReiniciar\r\n\t\t\t</button>\r\n\t\t),\r\n\t},\r\n];\r\n\r\nexport default function ProcessesTable({ data, ids, onFilter }) {\r\n\tconst columns = useMemo(() => makeColumns({ ids, onFilter }), [ids]);\r\n\treturn (\r\n\t\t<div className=\"processes-table-container\">\r\n\t\t\t<h3>Processos</h3>\r\n\t\t\t<Table columns={columns} data={data}></Table>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { useState, useEffect, useMemo, forwardRef, useRef } from \"react\";\r\nimport \"./index.css\";\r\n\r\nfunction ListItem({ data, isLast, autoScroll }) {\r\n\tconst ref = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isLast) return;\r\n\t\tif (!autoScroll) return;\r\n\t\tref.current.scrollIntoView({ behaviour: \"smooth\" });\r\n\t}, [ref, data, isLast, autoScroll]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div ref={ref} className={\"process-logs-item\"}>\r\n\t\t\t\t<code>\r\n\t\t\t\t\t<code className={\"process-logs-item-info \" + data.channel}>\r\n\t\t\t\t\t\t[{data.time} - {data.pname}]:{\" \"}\r\n\t\t\t\t\t</code>\r\n\t\t\t\t\t{data.data}\r\n\t\t\t\t</code>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default function ProcessLogs({ data }) {\r\n\tconst [autoScroll, setAutoScroll] = useState(true);\r\n\r\n\tconst { out, err } = useMemo(() => {\r\n\t\tconst out = data.filter((x) => x.channel === \"out\");\r\n\t\tconst err = data.filter((x) => x.channel === \"err\");\r\n\t\treturn { out, err };\r\n\t}, [data]);\r\n\r\n\treturn (\r\n\t\t<div className=\"process-logs-container\">\r\n\t\t\t<h3>Logs</h3>\r\n\r\n\t\t\t<div className=\"process-logs-lists-container\">\r\n\t\t\t\t<div className=\"process-logs-list\">\r\n\t\t\t\t\t{out.map((x, i) => (\r\n\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\tisLast={i === out.length - 1}\r\n\t\t\t\t\t\t\tautoScroll={autoScroll}\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tdata={x}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"process-logs-list\">\r\n\t\t\t\t\t{err.map((x, i) => (\r\n\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\tisLast={i === err.length - 1}\r\n\t\t\t\t\t\t\tautoScroll={autoScroll}\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tdata={x}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"process-logs-footer\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid=\"autoScroll\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tchecked={autoScroll}\r\n\t\t\t\t\t\tonChange={() => setAutoScroll((x) => !x)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{\"\t\"}Scroll Autom√°tico\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./index.css\";\r\nimport socketio from \"../../services/socketio\";\r\n\r\nexport default function Terminal() {\r\n\tconst [history, setHistory] = useState([]);\r\n\tconst [inputHistory, setInputHistory] = useState([]);\r\n\r\n\tconst bodyRef = useRef();\r\n\tconst inputRef = useRef();\r\n\r\n\tfunction addToHistory(text) {\r\n\t\tsetHistory((state) => {\r\n\t\t\tif (text.length) {\r\n\t\t\t\tif ([\"clear\", \"cls\"].includes(text[0])) return [];\r\n\t\t\t}\r\n\r\n\t\t\treturn [...state, ...text];\r\n\t\t});\r\n\t}\r\n\r\n\tfunction handleKeyDown(e) {\r\n\t\tswitch (e.keyCode) {\r\n\t\t\tcase 13: //ENTER\r\n\t\t\t\tconst cmd = inputRef.current.value;\r\n\t\t\t\tinputRef.current.value = \"\";\r\n\t\t\t\tsocketio.emit(\"cmd\", cmd);\r\n\t\t\t\tsetInputHistory((state) => [...state, cmd]);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 67:\r\n\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\tif (inputRef.current.value) {\r\n\t\t\t\t\t\tinputRef.current.value = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsocketio.emit(\"cmd\", \"SIGTERM\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsocketio.on(\"terminalData\", (x) => {\r\n\t\t\taddToHistory(x);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tbodyRef.current.scrollTo(0, bodyRef.current.scrollHeight);\r\n\t}, [history]);\r\n\r\n\treturn (\r\n\t\t<div className=\"terminal-container\">\r\n\t\t\t<h3>Terminal</h3>\r\n\t\t\t<div className=\"terminal-body\" ref={bodyRef}>\r\n\t\t\t\t{history.map((x, i) => (\r\n\t\t\t\t\t<p key={i}>\r\n\t\t\t\t\t\t<span>{x}</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<input\r\n\t\t\t\tclassName=\"terminal-input\"\r\n\t\t\t\tonKeyDown={handleKeyDown}\r\n\t\t\t\tref={inputRef}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { useState, useEffect, useMemo } from \"react\";\r\nimport ProcessesTable from \"./components/ProcessesTable\";\r\nimport ProcessLogs from \"./components/ProcessLogs\";\r\nimport Terminal from \"./components/Terminal\";\r\n\r\nimport socketio from \"./services/socketio\";\r\n\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n\tconst [processes, setProcesses] = useState([]);\r\n\tconst [ologs, setoLogs] = useState({});\r\n\tconst [ids, setids] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsocketio.on(\"processes\", setProcesses);\r\n\t\tsocketio.on(\"log\", (log) =>\r\n\t\t\tsetoLogs((state) => {\r\n\t\t\t\tconst key = log.pname + log.channel;\r\n\t\t\t\tif (!state[key]) state[key] = [];\r\n\r\n\t\t\t\tstate[key] = [...state[key], log]\r\n\t\t\t\t\t.reverse()\r\n\t\t\t\t\t.slice(0, 200)\r\n\t\t\t\t\t.reverse();\r\n\r\n\t\t\t\treturn { ...state };\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tfunction onFilter(id) {\r\n\t\tsetids((ids) => {\r\n\t\t\tif (ids.includes(id)) {\r\n\t\t\t\tids = ids.filter((x) => x !== id);\r\n\t\t\t} else {\r\n\t\t\t\tids = [id, ...ids];\r\n\t\t\t}\r\n\t\t\treturn ids;\r\n\t\t});\r\n\t}\r\n\r\n\tconst data = useMemo(() => {\r\n\t\tlet logs = Object.values(ologs);\r\n\r\n\t\tif (!logs.length) return [];\r\n\r\n\t\tlogs = logs.reduce((prev, current) => [...prev, ...current]);\r\n\r\n\t\tif (ids.length) {\r\n\t\t\tlogs = logs.filter((x) => ids.includes(x.pid));\r\n\t\t}\r\n\r\n\t\tlet logs_count = {};\r\n\t\tlet new_logs = [];\r\n\r\n\t\tfor (const log of logs.slice().reverse()) {\r\n\t\t\tconst key = log.pname + log.channel;\r\n\t\t\tif (!logs_count[key]) {\r\n\t\t\t\tlogs_count[key] = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (logs_count[key] > 200) continue;\r\n\r\n\t\t\tnew_logs.push(log);\r\n\r\n\t\t\tlogs_count[key] += 1;\r\n\t\t}\r\n\t\treturn new_logs.sort((a, b) => a.timestamp - b.timestamp);\r\n\t}, [ologs, ids]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<main>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Terminal />\r\n\t\t\t\t\t<ProcessesTable\r\n\t\t\t\t\t\tdata={processes}\r\n\t\t\t\t\t\tids={ids}\r\n\t\t\t\t\t\tonFilter={onFilter}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<ProcessLogs data={data} ids={ids} />\r\n\t\t\t</main>\r\n\t\t\t<footer />\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}